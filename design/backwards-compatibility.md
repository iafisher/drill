# Making drill backwards compatible

Status: Draft

Date: November 2019

Repo: https://github.com/iafisher/drill

Issue: https://github.com/iafisher/drill/issues/83



Once I commit to making drill public, what can’t I change?

- If a quiz file is valid (i.e., it parses without errors), then it will remain valid after a minor version upgrade, the behavior of each question will remain the same, and any results files generated by taking the quiz will remain valid.

- Format of quiz files

  - Cannot change overall format, i.e. the syntax of questions, the placement of IDs

    - barring of course adding a module-level setting, e.g. - format: v2

      - this is possible because [an error is thrown for unknown module-level settings](https://github.com/iafisher/drill/blob/master/src/persistence.rs#L334).

  - Can add new optional fields.

    - since [an error is thrown for unknown fields](https://github.com/iafisher/drill/issues/75).

  - Cannot remove or change behavior of current fields.

    - e.g., time out must always be specified in seconds.

      - Could change it to be floating-point

  - Cannot change custom script protocol.

  - Can add new question types.

  - Cannot change protocol for macro scripts.

    - or at least, have to continue to support old protocol. I could add a new protocol as long as it’s opt-in.

- Format of results files

  - Cannot change overall format, e.g. the fact that the results file contains a JSON hash whose keys are the identifiers.
  - Can add optional fields. Code has to handle case where the field isn’t there.
  - Cannot change meaning of existing fields.



How might I want to expand drill in the future?

- New question types

  - fine: can add a new field for new quesiton type

- Change spaced repetition algorithm

  - fine: user interface doesn’t have to be backwards compatible

- Change user interface

  - fine: user interface doesn’t have to be backwards compatible

- Record new information about results?

  - fine in general as long as the new information is optional and the code can handle the case when it doesn’t exist
  - e.g., rather than associate each result with a timestamp I might want to associate it with an invocation, and have that invocation time-stamped.